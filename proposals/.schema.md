# Proposal Schema Documentation

## Overview

The proposals system allows agents to submit learnings (heuristics, failures, patterns,
contradictions) for human review before integration into the Emergent Learning Framework.

## Directory Structure

```
proposals/
  pending/      # Proposals awaiting CEO review
  approved/     # Approved proposals (processed into ELF)
  rejected/     # Rejected proposals (kept for learning)
  .schema.md    # This file
```

## Proposal Types

### 1. Heuristic Proposal
A proposed rule or pattern that should guide future behavior.

### 2. Failure Proposal
A proposed failure record documenting what went wrong.

### 3. Pattern Proposal
A proposed observation about recurring patterns or behaviors.

### 4. Contradiction Proposal
A proposed flag when existing knowledge conflicts with new evidence.
Always requires CEO review before integration.

---

## Proposal Markdown Format

All proposals must follow this frontmatter format:

```markdown
---
type: heuristic | failure | pattern | contradiction
domain: <domain-name>
confidence: 0.0-1.0 (for heuristics)
severity: 1-5 (for failures)
tags: tag1, tag2, tag3
source: observation | success | failure | experiment
submitted_by: <agent-id or session-id>
submitted_at: YYYY-MM-DD HH:MM:SS
---

# Title

## Summary
Brief description of the proposal.

## Details
Full explanation with context.

## Evidence
Links to related learnings, experiments, or files.

## Recommendation
What action should be taken if approved.
```

---

## Proposal Lifecycle

1. **Submission**: Agent creates proposal in `pending/`
2. **Review**: CEO reviews via `list-proposals.sh`
3. **Decision**: CEO runs `review-proposal.sh <file> approve|reject [notes]`
4. **Integration**: If approved, `integrate-proposal.py` processes into ELF
5. **Archive**: Proposal moves to `approved/` or `rejected/`

---

## Filename Convention

```
YYYY-MM-DD_<type>_<slug>.md
```

Examples:
- `2025-12-11_heuristic_always-validate-inputs.md`
- `2025-12-11_failure_database-connection-timeout.md`
- `2025-12-11_pattern_retry-loop-detected.md`
- `2025-12-11_contradiction_conflicting-heuristics.md`

---

## Review Notes

When approving or rejecting, the CEO can add notes that get appended to the file:

```markdown
---
## Review Decision

**Status:** APPROVED | REJECTED
**Reviewed by:** CEO
**Reviewed at:** YYYY-MM-DD HH:MM:SS
**Notes:** <CEO notes explaining decision>
```

---

## Integration Behavior by Type

| Type          | Integration Action                                    |
|---------------|-------------------------------------------------------|
| heuristic     | Insert into heuristics table + create markdown file   |
| failure       | Insert into learnings table + create markdown file    |
| pattern       | Insert into learnings as observation                  |
| contradiction | Create CEO inbox item for deeper review               |

---

## Automation

Scripts:
- `review-proposal.sh` - Approve/reject proposals
- `integrate-proposal.py` - Process approved proposals into ELF
- `list-proposals.sh` - List pending proposals with summaries

Query integration:
- `query.py --pending-proposals` - Include pending proposals in check-in
