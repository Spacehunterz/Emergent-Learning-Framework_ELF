============================================================
Claim Chain Comprehensive Test Suite
============================================================

=== Test 1: Basic Operations ===
[PASS] claim_chain() succeeds with free files
[PASS] get_claim_for_file() returns correct claim
[PASS] release_chain() frees files for others
[PASS] complete_chain() marks work done

=== Test 2: Atomic Failure ===
[PASS] If ANY file is taken, entire claim fails
[PASS] No partial claims ever exist
[PASS] BlockedError contains correct info (blocking_chains, conflicting_files)

=== Test 3: TTL/Expiration ===
[PASS] Claims expire after TTL
[PASS] Expired claims don't block new claims
[PASS] get_all_active_chains() excludes expired

=== Test 4: Concurrent Simulation ===
[PASS] 5 agents with overlapping files - no exceptions
[PASS] No race conditions with file locking

=== Test 5: Edge Cases ===
[PASS] Empty file list
[PASS] Same agent can claim same files multiple times
[PASS] Non-existent chain_id for release returns False
[PASS] Very long file paths
[PASS] Windows path separators normalize correctly
[PASS] Wrong agent cannot release chain
[PASS] Wrong agent cannot complete chain

=== Test 6: Performance ===
  Time to claim 100 files: 0.0043s
[PASS] Claim 100 files in 0.0043s
  Time for 50 claim/release cycles: 0.4483s
[PASS] 50 cycles in 0.4483s

=== Test 7: Stress Tests ===
[PASS] 20 concurrent agents - no errors
[PASS] High contention: 4 success, 6 blocked, 0 errors

============================================================
Test Results: 23/23 passed
============================================================
